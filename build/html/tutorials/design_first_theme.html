

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Design your first theme &mdash; Dungeon Architect  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Launch Pad Window" href="launch_pad.html" />
    <link rel="prev" title="Create your first Dungeon" href="create_first_dungeon.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Dungeon Architect
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="create_first_dungeon.html">Create your first Dungeon</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Design your first theme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-a-theme-file">Create a Theme File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#open-the-theme-file">Open the Theme File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#assign-the-theme-file">Assign the Theme File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#design-the-theme">Design the Theme</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add-ground">Add Ground</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-more-prefabs">Add More Prefabs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-wall-pillars">Add Wall Pillars</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-windows">Add Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-wall-decorations">Add Wall Decorations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#marker-emitters">Marker Emitters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#align-with-offset">Align with Offset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recap">Recap</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="launch_pad.html">Launch Pad Window</a></li>
<li class="toctree-l1"><a class="reference internal" href="grid_flow_builder.html">Grid Flow Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="snap_flow_builder.html">Snap Flow Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="mario_builder.html">Mario Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple_city_builder.html">Simple City Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_builders.html">Other Builders</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_theming.html">Advanced Theming</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_dungeon_concpets.html">Advanced Dungeons</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Dungeon Architect</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Design your first theme</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="design-your-first-theme">
<h1>Design your first theme<a class="headerlink" href="#design-your-first-theme" title="Permalink to this headline">¶</a></h1>
<p>A theme file is a mapping between <strong>marker</strong> names (like Walls, Ground, Door etc) and the meshes that you provide.    The prefabs you map here will be used to build your dungeon</p>
<div class="figure align-center">
<img alt="../_images/theme_editor_preview.jpg" src="../_images/theme_editor_preview.jpg" />
</div>
<p>In the previous section, we created a dungeon with an existing theme file (CandyDungeonTheme).  In this section, we’ll create one ourselves</p>
<div class="section" id="create-a-theme-file">
<h2>Create a Theme File<a class="headerlink" href="#create-a-theme-file" title="Permalink to this headline">¶</a></h2>
<p>Create a new theme file from either the Main menu or the Create menu</p>
<div class="figure align-center" id="id1">
<img alt="../_images/create_theme_01.png" src="../_images/create_theme_01.png" />
<p class="caption"><span class="caption-text">Create from Main menu</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id2">
<img alt="../_images/create_theme_02.png" src="../_images/create_theme_02.png" />
<p class="caption"><span class="caption-text">Create from Create menu</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>This will create a theme file in the current open directory in the Projects window</p>
<div class="figure align-center">
<img alt="../_images/03.png" src="../_images/03.png" />
</div>
</div>
<div class="section" id="open-the-theme-file">
<h2>Open the Theme File<a class="headerlink" href="#open-the-theme-file" title="Permalink to this headline">¶</a></h2>
<p>Double-click the theme file to open the <strong>Theme Editor</strong>.  Dock the theme editor so you can see both the Scene view and the Theme Editor at the same time</p>
<div class="figure align-center">
<img alt="../_images/04.jpg" src="../_images/04.jpg" />
</div>
</div>
<div class="section" id="assign-the-theme-file">
<h2>Assign the Theme File<a class="headerlink" href="#assign-the-theme-file" title="Permalink to this headline">¶</a></h2>
<p>Destroy the existing dungeon by selecting <code class="docutils literal notranslate"><span class="pre">DungeonGrid</span></code> game object and click <code class="docutils literal notranslate"><span class="pre">Destroy</span> <span class="pre">Dungeon</span></code> button</p>
<p>Assign the theme file that you just created, on to the DungeonGrid game object</p>
<div class="figure align-center">
<img alt="../_images/05.png" src="../_images/05.png" />
</div>
<p>Click <code class="docutils literal notranslate"><span class="pre">Build</span> <span class="pre">Dungeon</span></code> and nothing should appear.   That’s because we haven’t added prefab mappings on the theme yet</p>
</div>
<div class="section" id="design-the-theme">
<h2>Design the Theme<a class="headerlink" href="#design-the-theme" title="Permalink to this headline">¶</a></h2>
<p>Navigate to <code class="docutils literal notranslate"><span class="pre">Assets\DungeonArchitect_Samples\Demo_Theme_Candy\Prefabs</span></code>.  This folder contains a set of mesh prefabs we can use for our dungeon</p>
<div class="figure align-center">
<img alt="../_images/06.jpg" src="../_images/06.jpg" />
</div>
<div class="section" id="add-ground">
<h3>Add Ground<a class="headerlink" href="#add-ground" title="Permalink to this headline">¶</a></h3>
<p>Drag-drop the ground prefab mesh on to the Theme Editor</p>
<div class="figure align-center">
<img alt="../_images/07.jpg" src="../_images/07.jpg" />
</div>
<p>Link up the mesh node with the <code class="docutils literal notranslate"><span class="pre">Ground</span></code> marker node.  When you do, you should see a live preview on the scene view with the dungeon using this ground mesh</p>
<div class="figure align-center">
<img alt="../_images/08.jpg" src="../_images/08.jpg" />
</div>
<p>For the live preview to work, make sure the “Realtime Update” button is enabled in the Theme Editor</p>
<div class="figure align-center">
<img alt="../_images/09.jpg" src="../_images/09.jpg" />
</div>
<p>Another criteria for the live preview to work is that a dungeon in the scene should reference the theme that is currently being edited in the theme editor</p>
</div>
<div class="section" id="add-more-prefabs">
<h3>Add More Prefabs<a class="headerlink" href="#add-more-prefabs" title="Permalink to this headline">¶</a></h3>
<p>Go ahead and add prefabs under the following markers: <strong>Wall</strong>, <strong>Fence</strong> and <strong>Door</strong></p>
<div class="figure align-center">
<img alt="../_images/10.jpg" src="../_images/10.jpg" />
</div>
<div class="figure align-center">
<img alt="../_images/11.jpg" src="../_images/11.jpg" />
</div>
</div>
<div class="section" id="add-wall-pillars">
<h3>Add Wall Pillars<a class="headerlink" href="#add-wall-pillars" title="Permalink to this headline">¶</a></h3>
<p>Drag drop the <code class="docutils literal notranslate"><span class="pre">Pillar2</span></code> prefab to the theme editor and link it to the <code class="docutils literal notranslate"><span class="pre">WallSeparator</span></code> marker node</p>
<div class="figure align-center">
<img alt="../_images/12.jpg" src="../_images/12.jpg" />
</div>
<p>We’ll need to make this pillar a bit bigger. Select the node you just dropped and modify the Scale parameter under Offset category</p>
<div class="figure align-center">
<img alt="../_images/13.jpg" src="../_images/13.jpg" />
</div>
<div class="figure align-center">
<img alt="../_images/14.jpg" src="../_images/14.jpg" />
</div>
</div>
<div class="section" id="add-windows">
<h3>Add Windows<a class="headerlink" href="#add-windows" title="Permalink to this headline">¶</a></h3>
<p>We have two wall meshes in the samples folder</p>
<div class="figure align-center">
<img alt="../_images/15.jpg" src="../_images/15.jpg" />
</div>
<p>The other one (<code class="docutils literal notranslate"><span class="pre">Wall2</span></code>) has a window. Lets configure the theme to sometimes use this second mesh so we have windows</p>
<p>Drag drop <code class="docutils literal notranslate"><span class="pre">Wall2</span></code> prefab on to the theme editor and place it <strong>before</strong> (left of) the existing wall prefab node</p>
<div class="figure align-center">
<img alt="../_images/16.jpg" src="../_images/16.jpg" />
</div>
<p>When you connect this to the <code class="docutils literal notranslate"><span class="pre">Wall</span></code> marker node, you’ll notice it has picked up the window node for all the walls</p>
<div class="figure align-center">
<img alt="../_images/17.jpg" src="../_images/17.jpg" />
</div>
<p>This is because Dungeon Architect starts executing the nodes from left to right. When the condition was satisfied to pick the first node, it stopped execution and never came to the second node.</p>
<p>There are multiple ways you can control this condition, the simplest being adjusting the probablity of selection.</p>
<p>Select the node you just dropped and change the probability to <code class="docutils literal notranslate"><span class="pre">0.5</span></code> (this would mean it gets selected 50% of the time).  The other 50% of the time, it would not be selected and the execution would then move to the next node, and hence selecting the non-windowed wall node</p>
<div class="figure align-center">
<img alt="../_images/18.png" src="../_images/18.png" />
</div>
<div class="figure align-center" id="id3">
<img alt="../_images/19.jpg" src="../_images/19.jpg" />
<p class="caption"><span class="caption-text">Half the walls have windows</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="add-wall-decorations">
<h3>Add Wall Decorations<a class="headerlink" href="#add-wall-decorations" title="Permalink to this headline">¶</a></h3>
<p>There’s a photo frame prefab we’d like to attach to every wall</p>
<div class="figure align-center">
<img alt="../_images/20.jpg" src="../_images/20.jpg" />
</div>
<p>Drag drop this prefab to the theme editor <strong>before</strong> the two existing nodes and link it to the <code class="docutils literal notranslate"><span class="pre">Wall</span></code> marker node</p>
<div class="figure align-center">
<img alt="../_images/21.jpg" src="../_images/21.jpg" />
</div>
<p>This will cause all the walls to disappear and be replaced with this photo frame</p>
<div class="figure align-center">
<img alt="../_images/22.jpg" src="../_images/22.jpg" />
</div>
<p>This is because once the photo frame was selected, the execution stopped and the the wall nodes further down the line were not executed.</p>
<p>Selected the photo frame and uncheck the flag “Consume on Attach”.  This will cause the execution to continue further even though this node was selected by the theming engine</p>
<div class="figure align-center">
<img alt="../_images/23.jpg" src="../_images/23.jpg" />
</div>
<p>Lets adjust the offset of the photo frame (position and rotation) to make it properly align with the inner walls</p>
<p>Select the photo frame node and change the position to <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">2,</span> <span class="pre">-0.22)</span></code> and rotation to <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">180,</span> <span class="pre">0)</span></code></p>
<div class="figure align-center">
<img alt="../_images/24.png" src="../_images/24.png" />
</div>
<p>The photo frame is aligned with the walls</p>
<div class="figure align-center">
<img alt="../_images/25.jpg" src="../_images/25.jpg" />
</div>
</div>
<div class="section" id="marker-emitters">
<h3>Marker Emitters<a class="headerlink" href="#marker-emitters" title="Permalink to this headline">¶</a></h3>
<p>We have an issue with the photo frames. They also spawn near windows</p>
<div class="figure align-center">
<img alt="../_images/26.jpg" src="../_images/26.jpg" />
</div>
<p><code class="docutils literal notranslate"><span class="pre">Marker</span> <span class="pre">Emitters</span></code> allow you to emit marker names from any of your dropped prefab nodes.  This means, we can define a new marker node (e.g. <code class="docutils literal notranslate"><span class="pre">MyWallDeco</span></code>) and then emit that marker from the wall node that doesn’t have a window (<code class="docutils literal notranslate"><span class="pre">Wall1</span></code> prefab).  All our wall decorations can now go under this <code class="docutils literal notranslate"><span class="pre">MyWallDeco</span></code> marker and it will show up only near solid walls</p>
<p>Right click on an empty area in the theme editor and select <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Marker</span> <span class="pre">Node</span></code></p>
<div class="figure align-center">
<img alt="../_images/27.png" src="../_images/27.png" />
</div>
<p>Select the node and change its name to <code class="docutils literal notranslate"><span class="pre">MyWallDeco</span></code></p>
<div class="figure align-center">
<img alt="../_images/28.png" src="../_images/28.png" />
</div>
<p>Break the link to the photo frame</p>
<div class="figure align-center">
<img alt="../_images/29.png" src="../_images/29.png" />
</div>
<p>Connect this under <code class="docutils literal notranslate"><span class="pre">MyWallDeco</span></code> marker node.  All the future wall decorations can also go under this marker</p>
<div class="figure align-center">
<img alt="../_images/30.png" src="../_images/30.png" />
</div>
<p>Now emit this marker from the wall node that doesn’t contain a window</p>
<p>Drag a link out of the bottom of the solid wall prefab node and release the mouse in an empty area</p>
<div class="figure align-center">
<img alt="../_images/31.png" src="../_images/31.png" />
</div>
<div class="figure align-center">
<img alt="../_images/32.png" src="../_images/32.png" />
</div>
<p>You can follow the same method to create another type of decoration (e.g. MyWindowDeco) and emit it from under the windowed wall node. In this example, I’ve added a flower pot in the windows</p>
<div class="figure align-center">
<img alt="../_images/33.jpg" src="../_images/33.jpg" />
</div>
</div>
<div class="section" id="align-with-offset">
<h3>Align with Offset<a class="headerlink" href="#align-with-offset" title="Permalink to this headline">¶</a></h3>
<p>Dungeon Architect can adapt to any modular asset regardless of the prefab pivot position.  If the pivots are off, you can always adjust them from the Offset section of the node’s properties</p>
<p>Sometimes, it is difficult to line up the ground node, as there is no point of reference to compare with.</p>
<p>In that case, turn on Debug Draw and build the dungeon.</p>
<div class="figure align-center">
<img alt="../_images/34.png" src="../_images/34.png" />
</div>
<div class="figure align-center">
<img alt="../_images/35.jpg" src="../_images/35.jpg" />
</div>
<p>This ground asset has its pivot on the corner instead of the center.   We’ll add an offset of position <code class="docutils literal notranslate"><span class="pre">(-2,</span> <span class="pre">0,</span> <span class="pre">-2)</span></code> to fix it and align with the debug drawn boundaries</p>
<div class="figure align-center">
<img alt="../_images/36.jpg" src="../_images/36.jpg" />
</div>
<p>It is important to first align the ground mesh and then use that as a reference to align your walls and fences.  If the ground is not aligned correctly, the rest will also not align (since you will be using an incorrect point of reference for aligning the rest)</p>
</div>
<div class="section" id="recap">
<h3>Recap<a class="headerlink" href="#recap" title="Permalink to this headline">¶</a></h3>
<p>In this section we learnt the following:</p>
<ul class="simple">
<li><p><em>Probablity</em> - Controls the percentage chance of a node being selected.  A value of 1 means 100% selection chance. A value of 0.25 means 25% selection chance</p></li>
<li><p><em>Execution Order</em> - The theme engine executes all the nodes under a marker node from left to right. If it selects a certain node, it stops executing, unless the <code class="docutils literal notranslate"><span class="pre">Consume</span> <span class="pre">on</span> <span class="pre">Attach</span></code> flag is unchecked</p></li>
<li><p><em>Marker Emitters</em> - You can create complex hierarchies with your own marker nodes, giving you more freedom to decorate your dungeons</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="launch_pad.html" class="btn btn-neutral float-right" title="Launch Pad Window" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="create_first_dungeon.html" class="btn btn-neutral float-left" title="Create your first Dungeon" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Code Respawn

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>